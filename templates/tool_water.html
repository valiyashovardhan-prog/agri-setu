<!DOCTYPE html>
<html lang="en">
<head>
    <title>Precision Water</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="logo"><i class="fas fa-tint"></i> Water Logic</div>
        <a href="{{ url_for('farmer_dashboard') }}" class="btn-secondary">
            <i class="fas fa-arrow-left"></i> Exit Tool
        </a>
    </nav>

    <div class="container" style="margin-top: 50px; max-width: 800px;">
        <div class="glass-panel">
            <h2 class="section-title">Irrigation Calculator</h2>
            <div class="input-group">
                <label>Current Soil Moisture (Touch Test)</label>
                <input type="range" id="moisture" min="0" max="100" style="width: 100%;">
                <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: #666;">
                    <span>Bone Dry</span><span>Moist</span><span>Wet</span>
                </div>
            </div>
            <div class="input-group" style="margin-top: 20px;">
                <label>Weather Forecast</label>
                <select id="weather" style="width: 100%; padding: 15px;">
                    <option value="Sunny">Sunny / Hot</option>
                    <option value="Cloudy">Cloudy</option>
                    <option value="Rain">Rain Expected</option>
                </select>
            </div>
            <button onclick="calcWater()" class="btn-submit" style="margin-top: 20px; background: #3b82f6;">Calculate</button>
        </div>

        <div id="resultBox" class="glass-panel" style="margin-top: 30px; display: none; text-align: center;">
            <i class="fas fa-faucet fa-3x" style="color: #3b82f6; margin-bottom: 10px;"></i>
            <h2><span id="advice-action"></span></h2>
            <p style="font-size: 1.2rem; margin-top: 10px;">Pump Runtime: <strong id="advice-time" style="color: #3b82f6;"></strong></p>
        </div>
    </div>

    <script>
        function calcWater() {
            const moisture = document.getElementById('moisture').value;
            const weather = document.getElementById('weather').value;
            let action="", time="";

            if (weather === 'Rain') { action="STOP. Do not irrigate."; time="0 mins"; }
            else if (moisture > 70) { action="Soil has sufficient water."; time="0 mins"; }
            else if (moisture < 30 && weather === 'Sunny') { action="CRITICAL. Irrigate immediately."; time="60 - 90 mins"; }
            else { action="Moderate Irrigation needed."; time="30 - 45 mins"; }

            document.getElementById('advice-action').innerText = action;
            document.getElementById('advice-time').innerText = time;
            document.getElementById('resultBox').style.display = "block";
        }
    </script>

    <!-- GOOGLE TRANSLATE SCRIPT -->
    <div id="google_translate_element" style="display:none;"></div>
    <script type="text/javascript">
        function googleTranslateElementInit() {
          new google.translate.TranslateElement({
            pageLanguage: 'en', 
            includedLanguages: 'en,hi,te,ta,mr,bn,kn', 
            layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
            autoDisplay: false
          }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>